- status_class_mapping = {"completed" => "table-success", "todo" => "table-danger", "pending" => "table-warning"}

.row.h-100.justify-content-center.text-center
  .col-sm.p-4
    %h2.pb-4.mb-0 Plan for the week
    - %w[Monday Tuesday Wednesday Thursday Friday Saturday Sunday].each do |day|
      .pb-2.accordion{id: "#{day}"}
        .accordion-item
          %h3.accordion-header
            %button.accordion-button.collapsed{type: "button", data: { bs_toggle: "collapse", bs_target: "#collapse-#{day}", aria_expanded: "false", aria_controls: "collapse-#{day}" }}
              = day

          .accordion-collapse.collapse{id: "collapse-#{day}", data: { bs_parent: "#{day}" }}
            .accordion-body
              %table.table
                %thead
                  %tr
                    %th Task
                    %th Reward XP
                    %th Teacher
                    %th
                %tbody
                  - @tasks.select { |task| task.deadline_day == day }.each do |task|
                    %tr{ class: status_class_mapping[task.status.to_s] }
                      %td.align-middle
                        = task.name
                      %td.align-middle
                        = task.reward_xp
                      %td.align-middle
                        = task.teacher.full_name
                      %td
                        .btn-toolbar.float-end
                          - if task.status.to_s == "todo"
                            = link_to 'Do', '#', class: 'btn btn-outline-secondary btn-sm'
                          - else
                            = link_to 'View', '#', class: 'btn btn-outline-secondary btn-sm'

  .col-sm.p-4.text-white.d-flex.align-items-center
    .card.border-0.rounded-5.shadow-lg.text-center.mx-auto.mb-auto
      .my-auto.p-3
        .mb-3
          %img.p-4.rounded-circle.img-fluid{src: "https://via.placeholder.com/300x300"}

        .h3
          Level
          = current_user.level

        .progress.m-3
          .progress-bar{role: "progressbar", style: "width: 70%;", aria_valuenow: "#{current_user.get_current_level_progress}", aria_valuemin: "0", aria_valuemax: "100"} 70%
          
        %a.text-black{href: "#"} Link