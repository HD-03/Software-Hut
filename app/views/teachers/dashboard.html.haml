.row.h-100.justify-content-center.text-center.p-3
  %header.pb-3
    .btn.btn-success.border-0.rounded-5.shadow-lg.py-2.px-3
      = link_to 'Set a Task', new_add_task_path, class: 'nav-link'
  %main
    %section
      - @students.each do |student|
        .pb-2.accordion{id: "#{student.username}"}
          .accordion-item
            %div
              %h3.accordion-header
                %button.accordion-button.collapsed{type: "button", data: { bs_toggle: "collapse", bs_target: "#collapse-#{student.username}", aria_expanded: "false", aria_controls: "collapse-#{student.username}" }}
                  = student.full_name

            - if @tasks.where(student_id: student.id).empty?
              .accordion-collapse.collapse{id: "collapse-#{student.username}", data: { bs_parent: "#{student.username}" }}
                .accordion-body 
                  No tasks available for this student

            - @tasks.where(student_id: student.id).each do |t|
              .accordion-collapse.collapse{id: "collapse-#{student.username}", data: { bs_parent: "#{student.username}" }}
                .accordion-body
                  .accordion{id: "tasks-#{student.username}"}
                    .accordion-item
                      %h4.accordion-header
                        %button.accordion-button.collapsed{type: "button", data: { bs_toggle: "collapse", bs_target: "#task#{t.id}-#{student.username}", aria_expanded: "false", aria_controls: "task#{t.id}-#{student.username}" }}
                          Task Name : #{t.name}

                      .accordion-collapse.collapse{id: "task#{t.id}-#{student.username}", data: { bs_parent: "tasks-#{student.username}" }}
                        .accordion-body
                          .row
                            .col
                              %p.text-start Task Description: #{t.description}
                          .row
                            .col
                              %p.text-start Time Set: #{t.time_set.strftime("%Y-%m-%d %H:%M")}
                          .row
                            .col
                              %p.text-start Deadline: #{t.deadline.strftime("%Y-%m-%d %H:%M")}
                          .row
                            .col
                              %p.text-start Reward XP: #{t.reward_xp}
                          .row
                            .col
                              %p.text-start Status: #{t.status}