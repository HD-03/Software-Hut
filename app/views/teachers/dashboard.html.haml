.row.h-100.justify-content-center.text-center.p-3
  %header.pb-3
    .btn.btn-success.border-0.rounded-5.shadow-lg.py-2.px-3
      = link_to 'Set a Task', new_add_task_path, class: 'nav-link'
  %main
    %section
      - @students.each do |student|
        .pb-2.accordion{id: "#{student.username}"}
          .accordion-item
            %div
              %h3.accordion-header
                %button.accordion-button.collapsed{type: "button", data: { bs_toggle: "collapse", bs_target: "#collapse-#{student.username}", aria_expanded: "false", aria_controls: "collapse-#{student.username}" }}
                  = student.username

            - if @tasks.where(student_id: student.id).empty?
              .accordion-collapse.collapse{id: "collapse-#{student.username}", data: { bs_parent: "#{student.username}" }}
                .accordion-body 
                  No tasks available for this student
            - else
              .accordion-collapse.collapse{id: "collapse-#{student.username}", data: { bs_parent: "#{student.username}" }}
                .accordion-body
                  %table.table
                    %thead
                      %tr
                        %th Task
                        %th Description
                        %th Reward XP
                        %th Deadline
                        %th Teacher
                        %th
                    %tbody
                      - @tasks.where(student_id: student.id).each do |task|
                        %tr{ class: status_class_mapping[task.status] }
                          %td= task.name
                          %td= task.description
                          %td= task.reward_xp
                          %td= task.deadline.strftime("%e %b %Y")
                          %td= task.teacher.full_name
                          %td
                            = link_to 'View', view_task_path(task), class: 'btn btn-outline-secondary btn-sm'
